<h1 align="center">alimc秒传文件使用帮助</h1>

> 在v3版本中提供了alimc秒传功能，特此说明

### 💦使用方法

- 在你的阿里云盘中，如果存在 `xxx.alimc` 文件，在其上右键，选择 `恢复文件`。稍后，即会在同目录中出现 `xxx.mp4`文件
- 在你的阿里云盘中，有一个`美剧.mp4`文件，在其上右键，选择 `创建秒传文件`。稍后，即会在同目录中出现 `美剧.alimc`文件

```bash
├── xxx.alimc     # 80MB  秒传文件
├── xxx.mp4       # 1GB   原始文件 
```
<br/>



### 📜原理说明

#### 阿里云盘秒传原理

向阿里云盘中上传文件时，官方支持秒传功能。计算出文件的sha1/size/proof_code，调用秒传API，若云盘中曾经有人上传过这个文件，则可以秒传成功。计算proof_code时需要读取文件类随机位置的8个字节数据作为校验。

#### alimc文件秒传原理

调用秒传时，需要读取类随机位置的8个字节数据

``````
当你有`美剧.mp4`这个文件时，调用秒传，1次成功.
当你只有这个文件的前1/4的数据时，可以通过尝试多次调用秒传，成功秒传（碰巧需要读取的位置在前1/4）（平均需要尝试8次）
``````

当你点击创建秒传文件时

``````
读取这个文件的sha1/size，下载这个文件的前1/4数据，经7zip极限压缩后以文本格式保存为`美剧.alimc`
``````

>原理上就是这样，但实际上还有大量算法上的优化，并非真的读取前1/4数据，而是分段的，跳着读取整个文件大约1/8的数据

最终，以原文件约1/8的体积，实现秒传文件。因为只有1/8的数据所以恢复文件时，可能需要经过多次尝试，需要等待5-20秒才能成功恢复文件。以时间换空间

<br/>



### ✨alimc秒传的意义

>在我的网盘中存储着约1TB的IT教程类视频，说删了它吧以后万一用到还不好找，不删它吧有时网盘空间又不够用

#### 优点
- 可以极大节省网盘空间
- alimc文件可以分享出去
- alimc对原文件的格式没有限制
- alimc文件是文本文件不能在线预览
- alimc文件的内容可以被视为随机数据，不能依此关联原文件权益

#### 缺点
- 完全依赖小白羊v3版本，必须用它恢复文件
- 完全依赖阿里云盘官方的秒传API
- 原文件是视频，可以在线预览，alimc文件是文本文件不能在线预览

总结：适用于压缩存储那些一点也不重要，但体积却很大的文件

<br/>



### 🙋‍文件丢失警告

由以上原理可知:
1. 原文件被全网删除后，即使有alimc文件也无法成功恢复。至少需要有一个人保存着原文件
2. 原文件被限制为违规文件后，即使通过alimc文件可以成功恢复文件，恢复的文件也无法下载，因为它是违规文件
3. 阿里云盘随时可能调整秒传API
4. 小白羊随时可能停止维护

所以:

当你从分享链接中导入了alimc文件，请及时右键恢复文件  
当你创建alimc文件时，你就应该意识到此文件可能会失效，需要自己保存原文件，避免原文件丢失  
